(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{426:function(t,s,n){"use strict";n.r(s);var a=n(41),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"一-自建功能组件-放大镜功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-自建功能组件-放大镜功能"}},[t._v("#")]),t._v(" 一.自建功能组件（放大镜功能）")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('//创建src/libs文件夹，创建libs/magnifier/components/Magnifier.vue。\n// Magnifier.vue作为对外的接口组件，用以接收props属性来实现动态组件\n// 这里的v-magnifier是自定义指令，需要挂载元素directives: {magnifier}\n<template>\n        <div v-magnifier class="containblk" :style="{width:imgWidth+\'px\', height: imgHeight+\'px\'}">\n            <div class="glass"  :style="{width: glassWidth+\'px\', height: glassHeight+\'px\'}">\n                <a href="javascript:;" id="imga">\n                    <img id="pg1"\n                         :src="imgUrl"  :style="{width:imgWidth+\'px\', height: imgHeight+\'px\'}">\n                </a>\n            </div>\n\n            <img id="staticimg"\n                 :src="imgUrl" :alt="imgAlt" :style="{width:imgWidth+\'px\', height: imgHeight+\'px\'}">\n        </div>\n</template>\n\n<script>\n    import magnifier from \'../directives/index\'\n    export default {\n        name: "maginifer",\n        directives: {magnifier}, \t// 引入自定义指令\n        props: {\n            glassHeight: {type:Number, default: 100},\n            glassWidth: {type: Number, default: 100},\n            imgUrl: String,\n            imgAlt: String,\n            imgWidth: Number,\n            imgHeight: Number\n        },\n        setup(props){\n            console.log(props)\n\n            return {\n                props\n            }\n        }\n\n    }\n<\/script>\n\n<style scoped lang="scss">\n    *{\n        outline: 1px solid red;\n    }\n\n    body{\n        height: 100vh;\n        width: 100vw;\n    }\n    .containblk{\n        position: relative;\n        margin: auto;\n        top: calc(50vh - 200px);\n        img{\n            position: absolute;\n        }\n\n    }\n    .glass{\n        position: absolute;\n        overflow: hidden;\n        z-index: 5;\n        /*visibility: visible;*/\n    }\n\n    #pg1{\n            transform: scale(1.5);\n            height: 400px;\n            width: 270px;\n            top: 60px;\n            left: 25px;\n            display: inline-block;\n            position: absolute;\n\n    }\n    .show{\n\n    }\n\n</style>\n')])])]),n("h2",{attrs:{id:"二-手动注册组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-手动注册组件"}},[t._v("#")]),t._v(" 二.手动注册组件")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建src/libs/index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" magnifier "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/magnifier'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" magUi "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmagUi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("install")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("magnifier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" magnifier"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" magUi\n")])])]),n("h2",{attrs:{id:"三-创建路由组件并使用功能组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三-创建路由组件并使用功能组件"}},[t._v("#")]),t._v(" 三.创建路由组件并使用功能组件")]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// 创建src/components/magnifierPage.vue\n<template>\n    <Magnifier\n        :glassWidth="glassWidth"\n        :glassHeight = "glassHeight"\n        :imgWidth = "imgWidth"\n        :imgHeight = "imgHeight"\n        :imgUrl = "imgUrl"\n        :imgAlt = "imgAlt"\n    ></Magnifier>\n</template>\n\n<script>\n\n    import magnifier from "../libs/magnifier/components/Magnifier";\n    import {reactive, toRefs} from \'vue\'\n    export default {\n        name: "magnifierPro",\n        components:{\n            magnifier\n        },\n        setup(){\n            const state = reactive({\n                glassWidth: 80,\n                glassHeight: 80,\n                imgUrl: require(\'../assets/img/gangtiexia2.jpg\'),\n                imgAlt: "钢铁侠2",\n                imgWidth: 270,\n                imgHeight: 400\n            })\n\n            return {\n                ...toRefs(state)\n            }\n        }\n    }\n<\/script>\n\n')])])]),n("h2",{attrs:{id:"四-自定义指令的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四-自定义指令的使用"}},[t._v("#")]),t._v(" 四.自定义指令的使用")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建src/libs/magnifier/directives，创建index.js和magnifier.js文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// magnifier.js:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" el\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" gls "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.glass'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放大镜")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" img_ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#pg1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 放大且被影藏的图片")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a_ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#staticimg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 显示在页面的静态图片")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" simgX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父元素container对当前页面的left值")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" simgY "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetTop\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父元素container对当前页面的top值")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给父元素container添加事件，不可给静态staticimg添加图片否则会闪图")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 若是给同级的a_监听mouseover事件则当放大镜出现时，a_会失去监听，因为是同级不能触发冒泡事件")]),t._v("\n        a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseover'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            gls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("visibility "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'visible'")]),t._v("\n            document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleMouseMove"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mouseout'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleMouseMove"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleMouseMove")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simgX\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Y")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" simgY\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使鼠标移出container时放大镜消失")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设为-1而非0是为了放大镜的出现和消失更流畅")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Y")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageX "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simgX"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("270")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pageY "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("simgY"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    gls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("visibility "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hidden'")]),t._v("\n                    document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mousemove'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handleMouseMove"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            gls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 40是放大镜的宽一半")]),t._v("\n            gls"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Y")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 长一半")]),t._v("\n            img_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("left "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("X")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.5")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("25")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 25是组件页面样式中设置的left偏移量\t")]),t._v("\n            img_"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Y")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.5")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'px'")]),t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 60是组件页面样式中设置的top偏移量\t")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js:")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" magnifier "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./magnifier'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" magnifier\n")])])]),n("h2",{attrs:{id:"五-vue2中自定义指令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五-vue2中自定义指令"}},[t._v("#")]),t._v(" 五.vue2中自定义指令")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//https://cn.vuejs.org/v2/guide/custom-directive.html#%E7%AE%80%E4%BB%8B")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局注册")]),t._v("\nVue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("directive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'newdirective'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  bind"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 钩子")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v("（el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" binding"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h4",{attrs:{id:"钩子函数包括"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#钩子函数包括"}},[t._v("#")]),t._v(" 钩子函数包括：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("bind")]),t._v("：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。")]),t._v(" "),n("li",[n("code",[t._v("inserted")]),t._v("：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。")]),t._v(" "),n("li",[n("code",[t._v("update")]),t._v("：所在组件的 VNode 更新时调用，"),n("strong",[t._v("但是可能发生在其子 VNode 更新之前")]),t._v("。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。")])]),t._v(" "),n("p",[t._v("我们会在"),n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/render-function.html#%E8%99%9A%E6%8B%9F-DOM",target:"_blank",rel:"noopener noreferrer"}},[t._v("稍后"),n("OutboundLink")],1),t._v("讨论"),n("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/render-function.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染函数"),n("OutboundLink")],1),t._v("时介绍更多 VNodes 的细节。")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("componentUpdated")]),t._v("：指令所在组件的 VNode "),n("strong",[t._v("及其子 VNode")]),t._v(" 全部更新后调用。")]),t._v(" "),n("li",[n("code",[t._v("unbind")]),t._v("：只调用一次，指令与元素解绑时调用。")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 局部注册")]),t._v("\ndirectives"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tnewdirective"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用时在标签中适用v-newdirective")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" binding")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"钩子函数的参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#钩子函数的参数"}},[t._v("#")]),t._v(" 钩子函数的参数")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("el")]),t._v("：指令所绑定的元素，可以用来直接操作 DOM。")])]),t._v(" "),n("li",[n("p",[t._v("binding:")]),t._v(" "),n("p",[t._v("：一个对象，包含以下 property：")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("name")]),t._v("：指令名，不包括 "),n("code",[t._v("v-")]),t._v(" 前缀。")]),t._v(" "),n("li",[n("code",[t._v("value")]),t._v("：指令的绑定值，例如："),n("code",[t._v('v-my-directive="1 + 1"')]),t._v(" 中，绑定值为 "),n("code",[t._v("2")]),t._v("。")]),t._v(" "),n("li",[n("code",[t._v("oldValue")]),t._v("：指令绑定的前一个值，仅在 "),n("code",[t._v("update")]),t._v(" 和 "),n("code",[t._v("componentUpdated")]),t._v(" 钩子中可用。无论值是否改变都可用。")]),t._v(" "),n("li",[n("code",[t._v("expression")]),t._v("：字符串形式的指令表达式。例如 "),n("code",[t._v('v-my-directive="1 + 1"')]),t._v(" 中，表达式为 "),n("code",[t._v('"1 + 1"')]),t._v("。")]),t._v(" "),n("li",[n("code",[t._v("arg")]),t._v("：传给指令的参数，可选。例如 "),n("code",[t._v("v-my-directive:foo")]),t._v(" 中，参数为 "),n("code",[t._v('"foo"')]),t._v("。")]),t._v(" "),n("li",[n("code",[t._v("modifiers")]),t._v("：一个包含修饰符的对象。例如："),n("code",[t._v("v-my-directive.foo.bar")]),t._v(" 中，修饰符对象为 "),n("code",[t._v("{ foo: true, bar: true }")]),t._v("。")])])]),t._v(" "),n("li",[n("p",[n("code",[t._v("vnode")]),t._v("：Vue 编译生成的虚拟节点。移步 "),n("a",{attrs:{href:"https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3",target:"_blank",rel:"noopener noreferrer"}},[t._v("VNode API"),n("OutboundLink")],1),t._v(" 来了解更多详情。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("oldVnode")]),t._v("：上一个虚拟节点，仅在 "),n("code",[t._v("update")]),t._v(" 和 "),n("code",[t._v("componentUpdated")]),t._v(" 钩子中可用。")])])]),t._v(" "),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<div v-newdirective:name=\"aaa\"></div>\nVue.directive('newdirective', {\n1.bind:function(el,binding){console.log(binding.argument, binding.value)} \t// 输出'name'和'aaa'\n})\n2.也可以v-newdirective='aaa'，binding.value也能输出aaa\n3.v-newdirective=\"{color:'white'}\"\nbinding.value.color --\x3e white\n\n4.\n")])])]),n("div",{staticClass:"language-text extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("<div id=\"dynamicexample\">\n  <h3>Scroll down inside this section ↓</h3>\n  // 动态传参\n  <p v-pin:[direction]=\"200\">I am pinned onto the page at 200px to the left.</p>\n</div>\nVue.directive('pin', {\n  bind: function (el, binding, vnode) {\n    el.style.position = 'fixed'\n    var s = (binding.arg == 'left' ? 'left' : 'top')\n    el.style[s] = binding.value + 'px'\n  }\n})\n\nnew Vue({\n  el: '#dynamicexample',\n  data: function () {\n    return {\n      direction: 'left'\n    }\n  }\n})\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);